<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Employees extends CI_Controller{    /////////////////////////////////////    ////////// DECLARING VARIABLES //////    /////////////////////////////////////    var $data = array();    /////////////////////////////////////    ////////// CONSTRUCTOR //////////////    /////////////////////////////////////    function __construct()    {        parent::__construct();        ini_set('display_errors', 1);        $this->load->model('mdl_app','app');        if(!$this->session->userdata('user')){            $this->session->set_flashdata('error','Login to view page');            redirect(base_url('admin'));        }    }    /////////////////////////////////////    ////////// INDEX FUNCTION ///////////    /////////////////////////////////////    public function index()    {        $content = $this->app->getContent('employees',false,false,false,'id','DESC');        $data['content'] = $content;        //echo '<pre>';print_r($data);exit;        $this->load->view('admin/template/header');        $this->load->view('admin/employees',$data);        $this->load->view('admin/template/footer');    }    public function addEmployee(){        if ($this->input->server('REQUEST_METHOD') === 'POST') {            $this->load->library('form_validation');            $this->form_validation->set_rules('name', 'Name', 'trim|required');            $this->form_validation->set_rules('email', 'Email', 'trim|required');            $this->form_validation->set_rules('password', 'Password', 'trim|required');            if ($this->form_validation->run() == FALSE)            {                redirect($_SERVER['HTTP_REFERER']);            }            else {                $data = array(                    'name' => $this->input->post('name'),                    'email' => $this->input->post('email'),                    'password' => md5($this->input->post('password'))                );                $isUpdated = $this->app->addContent('employees', $data);                if ($isUpdated) {                    $this->session->set_flashdata('success', "Employee added successfully");                    redirect("admin/employees");                } else {                    $this->session->set_flashdata('error', 'Something Went Wrong... Try Again');                    redirect($_SERVER['HTTP_REFERER']);                }            }        }//        print_r($data);exit;        $this->load->view('admin/template/header');        $this->load->view('admin/addEmployee');        $this->load->view('admin/template/footer');    }    public function employeeEdit($id){        if ($this->input->server('REQUEST_METHOD') === 'POST') {            $this->load->library('form_validation');            $this->form_validation->set_rules('name', 'Name', 'trim|required');            $this->form_validation->set_rules('email', 'Email', 'trim|required');            if ($this->form_validation->run() == FALSE)            {                redirect($_SERVER['HTTP_REFERER']);            }            else {                $data = array(                    'name' => $this->input->post('name'),                    'email' => $this->input->post('email')                );                if($this->input->post('password') != '' || $this->input->post('password') != null){                    $data['password'] = md5($this->input->post('password'));                }                $isUpdated = $this->app->updateRecord('employees', array('id'=>$id),$data);                if ($isUpdated) {                    $this->session->set_flashdata('success', "Employee updated successfully");                    redirect("admin/employees");                } else {                    $this->session->set_flashdata('success', 'Nothing Changed');                    redirect($_SERVER['HTTP_REFERER']);                }            }        }        $content = $this->app->getContent('employees','id',$id);        $data['content'] = $content[0];//        print_r($data);exit;        $this->load->view('admin/template/header');        $this->load->view('admin/editEmployee',$data);        $this->load->view('admin/template/footer');    }    function employeeDelete($id){        $this->app->delete('employees','id',$id);        $this->session->set_flashdata('success', "Employee deleted successfully");        redirect("admin/employees");    }}