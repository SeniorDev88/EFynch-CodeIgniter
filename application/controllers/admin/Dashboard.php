<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Dashboard extends CI_Controller{    /////////////////////////////////////    ////////// DECLARING VARIABLES //////    /////////////////////////////////////    var $data = array();    /////////////////////////////////////    ////////// CONSTRUCTOR //////////////    /////////////////////////////////////    function __construct()    {        parent::__construct();        ini_set('display_errors', 1);        $this->load->model('mdl_app','app');        if(!$this->session->userdata('user')){            $this->session->set_flashdata('error','Login to view page');            redirect(base_url('login'));        }    }    /////////////////////////////////////    ////////// INDEX FUNCTION ///////////    /////////////////////////////////////    public function index()    {        $contractorUsers = $this->app->getData(array(            'table'=>'efy_users',            'where'=>array('efy_users.usertype' => 'contractor')        ));        $homeUsers = $this->app->getData(array(            'table'=>'efy_users',            'where'=>array('efy_users.usertype' => 'homeowner')        ));        $jobs = $this->app->getData(array(            'table'=>'efy_jobs'        ));        $new = 1;        $inProgress = 1;        $completed = 1;        $verified = 1;        $graph = array();        foreach ($jobs as $k=>$v) {            if($v['jobstatus'] == 'new'){                $graph[$v['jobstatus']] = $new ++;            }else if($v['jobstatus'] == 'inprogress'){                $graph[$v['jobstatus']] = $inProgress ++;            }else if($v['jobstatus'] == 'completed'){                $graph[$v['jobstatus']] = $completed ++;            }else if($v['jobstatus'] == 'verified'){                $graph[$v['jobstatus']] = $verified ++;            }        }        $data['jobsG'] = $graph;        $data['homeUsers'] = count($homeUsers);        $data['contractorUsers'] = count($contractorUsers);        $data['jobs'] = count($jobs);        $data['report'] = array(            'Contractors'=>count($contractorUsers),            'HomeOwners'=>count($homeUsers),        );        $this->load->view('admin/template/header');        $this->load->view('admin/dashboard',$data);        $this->load->view('admin/template/footer');    }}